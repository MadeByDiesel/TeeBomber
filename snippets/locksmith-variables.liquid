{% comment %}
  Hey there! This snippet is managed by Locksmith (uselocksmith.com). You can
  fiddle with what's below, but your changes will be reset the next time that
  Locksmith interacts with your shop.

  Last updated: Wed, 14 Oct 2015 22:31:56 +0000
  Integration version: v3.16
{% endcomment %}

{% assign _shopify_shop = shop %}{% assign _shopify_customer = customer %}{% assign _shopify_link = link %}{% assign _shopify_linklist = linklist %}{% assign _shopify_cart = cart %}{% assign _shopify_page = page %}{% assign _shopify_article = article %}{% assign _shopify_blog = blog %}{% assign _shopify_product = product %}{% assign _shopify_collection = collection %}{% assign _shopify_template = template %}{% assign _locked = false %} {% assign _access_granted = true %} {% assign _access_denied = false %} {% assign _manual_lock = false %} {% assign _server_lock = false %} {% assign _lock_ids = '' %} {% assign _opened_lock_ids = '' %} {% assign _key_ids = '' %} {% assign _force_open = false %}{% if locksmith_scope and locksmith_scope != 'product_in_collection' %} {% assign _scope = locksmith_scope %} {% else %} {% assign _scope = _shopify_template | split: '/' | first | split: '.' | first %} {% endif %}{% if _shopify_collection and _scope == 'product' %} {% assign locksmith_scope = 'product_in_collection' %} {% endif %}{% if _scope == 'subject' %} {% assign _subject = locksmith_subject %} {% if _subject.price and _subject.variants %} {% assign _shopify_product = _subject %} {% assign _scope = 'product' %} {% elsif _subject.all_types and _subject.products %} {% assign _shopify_collection = _subject %} {% assign _scope = 'collection' %} {% elsif _subject.handle and _subject.articles %} {% assign _shopify_blog = _subject %} {% assign _scope = 'blog' %} {% elsif _subject.content and _subject.excerpt and _subject.comments %} {% assign _shopify_article = _subject %} {% assign _scope = 'article' %} {% elsif _subject.handle and _subject.author %} {% assign _shopify_page = _subject %} {% assign _scope = 'page' %} {% elsif _subject.total_price and _subject.total_weight %} {% assign _shopify_cart = _subject %} {% assign _scope = 'cart' %} {% elsif _subject.links and _subject.title %} {% assign _shopify_linklist = _subject %} {% assign _scope = 'linklist' %} {% elsif _subject.type %} {% if _subject.type == 'collection_link' %} {% assign _shopify_collection = _subject.object %} {% assign _scope = 'collection' %} {% elsif _subject.type == 'product_link' %} {% assign _shopify_product = _subject.object %} {% assign _scope = 'product' %} {% elsif _subject.type == 'page_link' %} {% assign _shopify_page = _subject.object %} {% assign _scope = 'page' %} {% elsif _subject.type == 'blog_link' %} {% assign _shopify_blog = _subject.object %} {% assign _scope = 'blog' %} {% elsif _subject.url == '/collections/all' %} {% assign _shopify_collection = collections.all %} {% assign _scope = 'collection' %} {% else %} {% assign _shopify_link = _subject %} {% assign _scope = 'link' %} {% endif %} {% endif %} {% endif %}{% assign _global_rules_any = false %} {% assign _global_rules_passed = false %} {% assign _global_rules_failed = false %}{% unless _global_rules_passed %} {% assign _global_rules_failed = true %} {% endunless %}{% assign _force_open_lock_15380 = false %} {% if _shopify_template == "list-collections" %} {% capture _lock_ids %}{{ _lock_ids }},15380{% endcapture %} {% assign __lock_opened = false %} {% unless __lock_opened %} {% if _shopify_customer %} {% capture _opened_lock_ids %}{{ _opened_lock_ids }},15380{% endcapture %} {% capture _key_ids %}{{ _key_ids }},21565{% endcapture %} {% assign __lock_opened = true %} {% endif %} {% endunless %} {% endif %} {% if _collection_stashed %} {% assign _shopify_collection = _collection_stash %} {% assign _collection_stashed = false %} {% endif %}{% if _scope_stashed %} {% assign _scope = _scope_stash %} {% assign _scope_stashed = false %} {% endif %}{% if _force_open_lock_15380 %} {% assign _force_open = true %} {% endif %} {% assign _force_open_lock_15377 = false %} {% if _scope == 'product' %} {% if _shopify_collection %} {% assign _collection_stashed = true %} {% assign _collection_stash = _shopify_collection %} {% endif %} {% assign _scope_stashed = true %} {% assign _scope_stash = _scope %} {% for _product_collection in _shopify_product.collections %} {% if _product_collection.handle == 'gun' %} {% assign _shopify_collection = _product_collection %} {% assign _scope = 'collection' %} {% endif %} {% endfor %} {% endif %} {% if _scope == 'collection' and _shopify_collection and _shopify_collection.handle == 'gun' %} {% capture _lock_ids %}{{ _lock_ids }},15377{% endcapture %} {% assign __lock_opened = false %} {% unless __lock_opened %} {% if _shopify_customer.tags contains "Gun" %} {% capture _opened_lock_ids %}{{ _opened_lock_ids }},15377{% endcapture %} {% capture _key_ids %}{{ _key_ids }},21558{% endcapture %} {% assign __lock_opened = true %} {% endif %} {% endunless %} {% endif %} {% if _collection_stashed %} {% assign _shopify_collection = _collection_stash %} {% assign _collection_stashed = false %} {% endif %}{% if _scope_stashed %} {% assign _scope = _scope_stash %} {% assign _scope_stashed = false %} {% endif %}{% if _force_open_lock_15377 %} {% assign _force_open = true %} {% endif %} {% assign _force_open_lock_15379 = false %} {% if _shopify_shop and _scope != 'customers' and template != 'customers/activate_account' and template != 'customers/reset_password' %} {% capture _lock_ids %}{{ _lock_ids }},15379{% endcapture %} {% assign __lock_opened = false %} {% unless __lock_opened %} {% if _shopify_customer.tags contains "Wholesale" %} {% capture _opened_lock_ids %}{{ _opened_lock_ids }},15379{% endcapture %} {% capture _key_ids %}{{ _key_ids }},21564{% endcapture %} {% assign __lock_opened = true %} {% endif %} {% endunless %} {% endif %} {% if _collection_stashed %} {% assign _shopify_collection = _collection_stash %} {% assign _collection_stashed = false %} {% endif %}{% if _scope_stashed %} {% assign _scope = _scope_stash %} {% assign _scope_stashed = false %} {% endif %}{% if _force_open_lock_15379 %} {% assign _force_open = true %} {% endif %} {% assign _force_open_lock_15382 = false %} {% if _scope == 'product' %} {% if _shopify_collection %} {% assign _collection_stashed = true %} {% assign _collection_stash = _shopify_collection %} {% endif %} {% assign _scope_stashed = true %} {% assign _scope_stash = _scope %} {% for _product_collection in _shopify_product.collections %} {% if _product_collection.handle == 'golf' %} {% assign _shopify_collection = _product_collection %} {% assign _scope = 'collection' %} {% endif %} {% endfor %} {% endif %} {% if _scope == 'collection' and _shopify_collection and _shopify_collection.handle == 'golf' %} {% capture _lock_ids %}{{ _lock_ids }},15382{% endcapture %} {% assign __lock_opened = false %} {% unless __lock_opened %} {% if _shopify_customer.tags contains "Golf" %} {% capture _opened_lock_ids %}{{ _opened_lock_ids }},15382{% endcapture %} {% capture _key_ids %}{{ _key_ids }},21568{% endcapture %} {% assign __lock_opened = true %} {% endif %} {% endunless %} {% endif %} {% if _collection_stashed %} {% assign _shopify_collection = _collection_stash %} {% assign _collection_stashed = false %} {% endif %}{% if _scope_stashed %} {% assign _scope = _scope_stash %} {% assign _scope_stashed = false %} {% endif %}{% if _force_open_lock_15382 %} {% assign _force_open = true %} {% endif %}{% assign locksmith_lock_ids = _lock_ids | remove_first: ',' | split: ',' %} {% assign locksmith_opened_lock_ids = _opened_lock_ids | remove_first: ',' | split: ',' %} {% assign locksmith_key_ids = _key_ids | remove_first: ',' | split: ',' %}{% if _force_open %} {% assign locksmith_opened_lock_ids = locksmith_lock_ids %} {% endif %}{% if locksmith_lock_ids.size > 0 %} {% assign _locked = true %}{% unless locksmith_opened_lock_ids == locksmith_lock_ids %} {% assign _access_granted = false %} {% assign _access_denied = true %} {% endunless %}{% if _global_rules_any and _global_rules_failed %} {% assign _access_granted = false %} {% assign _access_denied = true %} {% endif %} {% endif %}{% assign locksmith_locked = _locked %} {% unless locksmith_scope %} {% assign locksmith_scope = _scope %} {% endunless %} {% assign locksmith_access_granted = _access_granted %} {% assign locksmith_access_denied = _access_denied %} {% assign locksmith_manual_lock = _manual_lock %} {% assign locksmith_server_lock = _server_lock %}{% capture locksmith_json %} <script type="application/vnd.locksmith+json">{ "version": "v3.16", "locked": {{ locksmith_locked }}, "scope": "{{ locksmith_scope }}", "access_granted": {{ locksmith_access_granted }}, "access_denied": {{ locksmith_access_denied }}, "manual_lock": {{ locksmith_manual_lock }}, "server_lock": {{ locksmith_server_lock }}, "locks": { "all": [{{ locksmith_lock_ids | join: ', ' }}], "opened": [{{ locksmith_opened_lock_ids | join: ', ' }}] }, "keys": [{{ locksmith_key_ids | join: ', ' }}], "state": { "template": "{{ _shopify_template }}", "product": {% if _shopify_product %}"{{ _shopify_product.handle }}"{% else %}null{%endif %}, "collection": {% if _shopify_collection %}"{{ _shopify_collection.handle }}"{% else %}null{%endif %}, "page": {% if _shopify_page %}"{{ _shopify_page.handle }}"{% else %}null{%endif %}, "blog": {% if _shopify_blog %}"{{ _shopify_blog.handle }}"{% else %}null{%endif %}, "article": {% if _shopify_article %}"{{ _shopify_article.handle }}"{% else %}null{%endif %} }, "shop": { "customer_accounts_enabled": {{ _shopify_shop.customer_accounts_enabled }} } }</script> {% endcapture %}